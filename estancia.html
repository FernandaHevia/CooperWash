<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cooper Wash - Estancia Canina</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffe0f0 0%, #fff0f5 50%, #ffebee 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
            color: #5d4037;
        }

        /* BURBUJAS ANIMADAS */
        @keyframes bubbleFloat {
            0% { transform: translateY(0) scale(0.8); opacity: 0; }
            20% { opacity: 0.8; }
            80% { opacity: 0.6; }
            100% { transform: translateY(-120vh) scale(1.3); opacity: 0; }
        }

        .bubble {
            position: fixed;
            pointer-events: none;
            z-index: 0;
            animation: bubbleFloat linear infinite;
            filter: drop-shadow(0 0 10px rgba(135, 206, 250, 0.5));
        }

        .bubble svg {
            width: 100%;
            height: 100%;
        }

        .bubble-1 { width: 45px; height: 45px; left: 8%; bottom: -50px; animation-duration: 7s; animation-delay: 0s; }
        .bubble-2 { width: 35px; height: 35px; left: 18%; bottom: -50px; animation-duration: 8s; animation-delay: 1.5s; }
        .bubble-3 { width: 55px; height: 55px; left: 28%; bottom: -50px; animation-duration: 9s; animation-delay: 3s; }
        .bubble-4 { width: 40px; height: 40px; left: 42%; bottom: -50px; animation-duration: 7.5s; animation-delay: 0.8s; }
        .bubble-5 { width: 48px; height: 48px; left: 52%; bottom: -50px; animation-duration: 8.5s; animation-delay: 2s; }
        .bubble-6 { width: 32px; height: 32px; left: 65%; bottom: -50px; animation-duration: 6.5s; animation-delay: 4s; }
        .bubble-7 { width: 50px; height: 50px; left: 75%; bottom: -50px; animation-duration: 9.5s; animation-delay: 1s; }
        .bubble-8 { width: 38px; height: 38px; left: 88%; bottom: -50px; animation-duration: 7s; animation-delay: 3.5s; }

        /* HUELLITAS */
        @keyframes pawWiggle {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(8deg); }
        }

        .paw-print {
            position: fixed;
            z-index: 0;
            pointer-events: none;
            animation: pawWiggle 5s infinite ease-in-out;
            opacity: 0.18;
        }

        .paw-1 { top: 8%; left: 3%; width: 55px; animation-delay: 0s; }
        .paw-2 { top: 22%; right: 5%; width: 48px; animation-delay: 1s; }
        .paw-3 { top: 38%; left: 8%; width: 52px; animation-delay: 2s; }
        .paw-4 { top: 50%; right: 12%; width: 45px; animation-delay: 3s; }
        .paw-5 { top: 65%; left: 6%; width: 50px; animation-delay: 1.5s; }
        .paw-6 { top: 80%; right: 8%; width: 47px; animation-delay: 2.5s; }

        /* CHIWAWA CAF√â JUGUET√ìN */
        .chihuahua {
            width: 110px;
            height: 110px;
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 10;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .chihuahua:hover {
            transform: scale(1.15);
        }

        @keyframes wave {
            0%, 100% { transform: rotate(-15deg); }
            50% { transform: rotate(30deg) translateY(-10px); }
        }

        .wave-paw {
            animation: wave 0.6s ease-in-out 2;
        }

        @keyframes wag {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(25deg); }
            75% { transform: rotate(-25deg); }
        }

        .happy-tail {
            animation: wag 0.5s infinite;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.15);
            position: relative;
            z-index: 1;
            border: 5px solid #8B4513;
        }

        header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 30px;
            border-bottom: 4px dashed #FFB6B6;
        }

        .logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            background-image: url('logo.jpeg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3);
            border: 4px solid #8B4513;
        }

        h1 {
            font-family: 'Fredoka One', cursive;
            color: #8B4513;
            font-size: 2.5em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.1);
        }

        .subtitle {
            color: #6d4c41;
            font-size: 1.3em;
            font-weight: 600;
        }

        .form-section {
            background: linear-gradient(135deg, #fff8f5 0%, #fef5e8 100%);
            padding: 30px;
            border-radius: 24px;
            border: 3px solid #FFB6B6;
            box-shadow: 0 8px 25px rgba(255,182,182,0.2);
            margin-bottom: 25px;
        }

        h2 {
            color: #8B4513;
            margin-bottom: 25px;
            font-size: 1.8em;
            font-family: 'Fredoka One', cursive;
            text-align: center;
        }

        .section-title {
            color: #8B4513;
            font-size: 1.3em;
            margin: 25px 0 15px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: 'üêæ';
            font-size: 1.2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #8B4513;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1em;
        }

        label .required {
            color: #ff4444;
            font-weight: bold;
        }

        input[type="text"],
        input[type="tel"],
        input[type="date"],
        input[type="time"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #FFB6B6;
            border-radius: 12px;
            font-size: 1em;
            font-family: 'Poppins', sans-serif;
            background: white;
            transition: all 0.3s;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #8B4513;
            box-shadow: 0 0 0 3px rgba(139,69,19,0.15);
        }

        .date-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border: 2px solid #FFB6B6;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            background: #fff0f0;
            border-color: #8B4513;
            transform: translateY(-2px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #8B4513;
        }

        .info-box {
            background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
            border-left: 4px solid #0288D1;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            color: #01579B;
        }

        .info-box strong {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .price-section {
            background: linear-gradient(135deg, #fff9e6 0%, #fff3cc 100%);
            border: 3px solid #FFD700;
            border-radius: 16px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .price-section h3 {
            color: #B8860B;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .price-breakdown {
            display: grid;
            gap: 10px;
            margin: 15px 0;
            text-align: left;
        }

        .price-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 8px;
            font-weight: 500;
        }

        .total-price {
            font-size: 2.5em;
            font-weight: 700;
            color: #B8860B;
            margin: 15px 0;
        }

        .btn {
            width: 100%;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(139,69,19,0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(139,69,19,0.4);
        }

        .success-message {
            display: none;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(76,175,80,0.3);
        }

        .success-message.show {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .meal-schedule {
            display: grid;
            gap: 15px;
            margin: 15px 0;
        }

        .meal-item {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #FFB6B6;
        }

        .meal-time-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .date-grid {
                grid-template-columns: 1fr;
            }

            .total-price {
                font-size: 2em;
            }
        }
    </style>

    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBJnSVvjDY-RPD9468EuJsoqDH7gRMR9hw",
            authDomain: "cooper-wash.firebaseapp.com",
            projectId: "cooper-wash",
            storageBucket: "cooper-wash.firebasestorage.app",
            messagingSenderId: "453258464544",
            appId: "1:453258464544:web:ec41218bc8bfb399d05b45"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
</head>
<body>
    <!-- BURBUJAS CON TONOS AZULES -->
    <div class="bubble bubble-1"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#87CEFA" opacity="0.6"/><circle cx="35" cy="35" r="15" fill="#B0E0E6" opacity="0.8"/></svg></div>
    <div class="bubble bubble-2"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#87CEEB" opacity="0.5"/><circle cx="40" cy="30" r="10" fill="#ADD8E6" opacity="0.9"/></svg></div>
    <div class="bubble bubble-3"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#00BFFF" opacity="0.6"/><circle cx="30" cy="40" r="18" fill="#87CEFA" opacity="0.7"/><circle cx="70" cy="35" r="14" fill="#87CEFA" opacity="0.8"/></svg></div>
    <div class="bubble bubble-4"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#1E90FF" opacity="0.55"/><circle cx="60" cy="45" r="12" fill="#87CEEB" opacity="0.8"/></svg></div>
    <div class="bubble bubble-5"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#4682B4" opacity="0.6"/><circle cx="35" cy="30" r="15" fill="#87CEFA" opacity="0.7"/><circle cx="65" cy="40" r="10" fill="#ADD8E6" opacity="0.8"/></svg></div>
    <div class="bubble bubble-6"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#6495ED" opacity="0.5"/><circle cx="40" cy="35" r="12" fill="#87CEFA" opacity="0.9"/></svg></div>
    <div class="bubble bubble-7"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#5F9EA0" opacity="0.6"/><circle cx="55" cy="40" r="14" fill="#87CEEB" opacity="0.7"/></svg></div>
    <div class="bubble bubble-8"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="#4169E1" opacity="0.55"/><circle cx="45" cy="35" r="10" fill="#87CEFA" opacity="0.8"/></svg></div>

    <!-- HUELLITAS -->
    <div class="paw-print paw-1"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="20" ry="30" fill="#8B4513" opacity="0.6"/><circle cx="35" cy="30" r="15" fill="#8B4513" opacity="0.6"/><circle cx="65" cy="30" r="15" fill="#8B4513" opacity="0.6"/><circle cx="25" cy="45" r="12" fill="#8B4513" opacity="0.6"/><circle cx="75" cy="45" r="12" fill="#8B4513" opacity="0.6"/></svg></div>
    <div class="paw-print paw-2"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="18" ry="28" fill="#8B4513" opacity="0.6"/><circle cx="35" cy="32" r="13" fill="#8B4513" opacity="0.6"/><circle cx="65" cy="32" r="13" fill="#8B4513" opacity="0.6"/><circle cx="25" cy="48" r="10" fill="#8B4513" opacity="0.6"/><circle cx="75" cy="48" r="10" fill="#8B4513" opacity="0.6"/></svg></div>
    <div class="paw-print paw-3"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="22" ry="32" fill="#8B4513" opacity="0.6"/><circle cx="33" cy="28" r="16" fill="#8B4513" opacity="0.6"/><circle cx="67" cy="28" r="16" fill="#8B4513" opacity="0.6"/><circle cx="23" cy="43" r="13" fill="#8B4513" opacity="0.6"/><circle cx="77" cy="43" r="13" fill="#8B4513" opacity="0.6"/></svg></div>
    <div class="paw-print paw-4"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="19" ry="29" fill="#8B4513" opacity="0.6"/><circle cx="36" cy="31" r="14" fill="#8B4513" opacity="0.6"/><circle cx="64" cy="31" r="14" fill="#8B4513" opacity="0.6"/><circle cx="26" cy="46" r="11" fill="#8B4513" opacity="0.6"/><circle cx="74" cy="46" r="11" fill="#8B4513" opacity="0.6"/></svg></div>
    <div class="paw-print paw-5"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="21" ry="31" fill="#8B4513" opacity="0.6"/><circle cx="34" cy="29" r="15" fill="#8B4513" opacity="0.6"/><circle cx="66" cy="29" r="15" fill="#8B4513" opacity="0.6"/><circle cx="24" cy="44" r="12" fill="#8B4513" opacity="0.6"/><circle cx="76" cy="44" r="12" fill="#8B4513" opacity="0.6"/></svg></div>
    <div class="paw-print paw-6"><svg viewBox="0 0 100 100"><ellipse cx="50" cy="60" rx="17" ry="27" fill="#8B4513" opacity="0.6"/><circle cx="37" cy="33" r="12" fill="#8B4513" opacity="0.6"/><circle cx="63" cy="33" r="12" fill="#8B4513" opacity="0.6"/><circle cx="27" cy="49" r="9" fill="#8B4513" opacity="0.6"/><circle cx="73" cy="49" r="9" fill="#8B4513" opacity="0.6"/></svg></div>

    <!-- CHIWAWA CAF√â -->
    <div class="chihuahua" id="chihuahua">
        <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="60" cy="80" rx="35" ry="28" fill="#8B4513"/>
            <circle cx="75" cy="55" r="25" fill="#A0522D" id="head"/>
            <path d="M60 40 Q50 25 55 15 Q60 25 65 35 Z" fill="#8B4513"/>
            <path d="M90 40 Q100 25 95 15 Q90 25 85 35 Z" fill="#8B4513"/>
            <ellipse cx="85" cy="65" rx="15" ry="12" fill="#D2691E"/>
            <circle cx="88" cy="63" r="3" fill="#000"/>
            <circle cx="70" cy="52" r="6" fill="#fff"/>
            <circle cx="80" cy="52" r="6" fill="#fff"/>
            <circle cx="71" cy="53" r="3" fill="#000"/>
            <circle cx="81" cy="53" r="3" fill="#000"/>
            <circle cx="69" cy="51" r="2" fill="#fff" opacity="0.7"/>
            <circle cx="79" cy="51" r="2" fill="#fff" opacity="0.7"/>
            <path d="M82 70 Q85 73 88 70" fill="#ff6b9d" stroke="#ff6b9d" stroke-width="2" id="tongue"/>
            <ellipse cx="45" cy="90" rx="12" ry="20" fill="#8B4513" id="leftPaw" transform="rotate(-15 45 90)"/>
            <ellipse cx="75" cy="90" rx="12" ry="20" fill="#8B4513" id="rightPaw"/>
            <path d="M30 75 Q20 70 25 60 Q30 65 35 70 Z" fill="#A0522D" id="tail"/>
        </svg>
    </div>

    <div class="container">
        <header>
            <div class="logo"></div>
            <h1>Cooper Wash</h1>
            <p class="subtitle">üè† Estancia Canina üêï</p>
        </header>

        <div class="form-section">
            <h2>Reserva la Estancia de tu Peludo</h2>
            
            <div class="info-box">
                <strong>üè° ¬°Tu perrito estar√° como en casa!</strong>
                Reserva una estancia c√≥moda y segura para tu mejor amigo. Incluye alimentaci√≥n, cuidados personalizados y mucho amor. üíï
            </div>

            <form id="estanciaForm">
                <!-- INFORMACI√ìN DEL DUE√ëO -->
                <div class="section-title">Informaci√≥n del Due√±o</div>
                
                <div class="form-group">
                    <label for="nombreDueno">Nombre Completo <span class="required">*</span></label>
                    <input type="text" id="nombreDueno" placeholder="Ej. Mar√≠a Gonz√°lez" required>
                </div>

                <div class="form-group">
                    <label for="telefono">Tel√©fono <span class="required">*</span></label>
                    <input type="tel" id="telefono" placeholder="Ej. 999-123-4567" required>
                </div>

                <!-- INFORMACI√ìN DE LA MASCOTA -->
                <div class="section-title">Informaci√≥n de tu Mascota</div>

                <div class="form-group">
                    <label for="nombrePerro">Nombre de tu Perro <span class="required">*</span></label>
                    <input type="text" id="nombrePerro" placeholder="Ej. Cooper, Max, Luna" required>
                </div>

                <div class="form-group">
                    <label for="raza">Raza <span class="required">*</span></label>
                    <input type="text" id="raza" placeholder="Ej. Labrador, Chihuahua, Mestizo" required>
                </div>

                <div class="form-group">
                    <label for="tamano">Tama√±o <span class="required">*</span></label>
                    <select id="tamano" required onchange="calcularTotal()">
                        <option value="">Seleccionar...</option>
                        <option value="CH/M">Chico/Mediano (0-15kg)</option>
                        <option value="G">Grande (15-30kg)</option>
                        <option value="XG">Extra Grande (30-60kg)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="edad">Edad (a√±os)</label>
                    <input type="number" id="edad" placeholder="Ej. 3" min="0" max="20">
                </div>

                <div class="form-group">
                    <label for="sexo">Sexo <span class="required">*</span></label>
                    <select id="sexo" required>
                        <option value="">Seleccionar...</option>
                        <option value="macho">Macho</option>
                        <option value="hembra">Hembra</option>
                    </select>
                </div>

                <!-- FECHAS DE ESTANCIA -->
                <div class="section-title">Fechas de Estancia</div>

                <div class="date-grid">
                    <div class="form-group">
                        <label for="fechaEntrada">Fecha de Entrada <span class="required">*</span></label>
                        <input type="date" id="fechaEntrada" required onchange="calcularDias()">
                    </div>

                    <div class="form-group">
                        <label for="fechaSalida">Fecha de Salida <span class="required">*</span></label>
                        <input type="date" id="fechaSalida" required onchange="calcularDias()">
                    </div>
                </div>

                <div class="date-grid">
                    <div class="form-group">
                        <label for="horaEntrada">Hora de Entrada</label>
                        <input type="time" id="horaEntrada" value="09:00">
                    </div>

                    <div class="form-group">
                        <label for="horaSalida">Hora de Salida</label>
                        <input type="time" id="horaSalida" value="18:00">
                    </div>
                </div>

                <div id="diasEstancia" style="display: none; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); padding: 15px; border-radius: 12px; margin: 15px 0; text-align: center;">
                    <strong style="color: #2E7D32; font-size: 1.2em;">üìÖ Total de d√≠as: <span id="totalDias">0</span></strong>
                </div>

                <!-- ALIMENTACI√ìN -->
                <div class="section-title">Alimentaci√≥n</div>

                <div class="form-group">
                    <label for="tipoComida">Tipo de Alimento <span class="required">*</span></label>
                    <select id="tipoComida" required onchange="calcularTotal()">
                        <option value="">Seleccionar...</option>
                        <option value="salmon">Alimento de Salm√≥n - $90/kg</option>
                        <option value="pollo">Alimento de Pollo - $80/kg</option>
                        <option value="propias">Traigo el alimento de mi perro (sin costo)</option>
                        <option value="casera">Comida casera - $50/d√≠a</option>
                        <option value="dieta-especial">Dieta especial veterinaria</option>
                    </select>
                </div>

                <div class="form-group" id="kilosGroup" style="display: none;">
                    <label for="kilosAlimento">¬øCu√°ntos kilos necesitas? <span class="required">*</span></label>
                    <input type="number" id="kilosAlimento" min="1" max="50" step="0.5" placeholder="Ej. 2.5" onchange="calcularTotal()">
                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                        üí° Calcula aproximadamente 200-300g por d√≠a seg√∫n el tama√±o de tu perro
                    </div>
                </div>

                <div class="form-group">
                    <label for="cantidadComida">Cantidad de comida por porci√≥n</label>
                    <input type="text" id="cantidadComida" placeholder="Ej. 1 taza, 200g">
                </div>

                <div class="form-group">
                    <label>Horarios de Alimentaci√≥n <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="comida1" value="desayuno" onchange="toggleHorario('hora1')">
                            <label for="comida1">Desayuno</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comida2" value="comida" onchange="toggleHorario('hora2')">
                            <label for="comida2">Comida</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="comida3" value="cena" onchange="toggleHorario('hora3')">
                            <label for="comida3">Cena</label>
                        </div>
                    </div>
                </div>

                <div class="meal-schedule">
                    <div class="meal-item" id="horario1" style="display: none;">
                        <label style="margin-bottom: 10px; display: block;">‚è∞ Hora del Desayuno</label>
                        <input type="time" id="hora1" value="08:00">
                    </div>
                    <div class="meal-item" id="horario2" style="display: none;">
                        <label style="margin-bottom: 10px; display: block;">‚è∞ Hora de la Comida</label>
                        <input type="time" id="hora2" value="14:00">
                    </div>
                    <div class="meal-item" id="horario3" style="display: none;">
                        <label style="margin-bottom: 10px; display: block;">‚è∞ Hora de la Cena</label>
                        <input type="time" id="hora3" value="19:00">
                    </div>
                </div>

                <!-- SERVICIOS ADICIONALES -->
                <div class="section-title">Servicios Adicionales</div>

                <div class="info-box">
                    <strong>‚úÖ Incluido en tu estancia:</strong>
                    ‚Ä¢ Paseos diarios ‚Ä¢ Sesiones de juego ‚Ä¢ Fotos y videos todos los d√≠as ‚Ä¢ Cuidado personalizado 24/7
                </div>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="medicamento" value="medicamento" onchange="calcularTotal()">
                        <label for="medicamento">üíä Administraci√≥n de medicamento (+$50/d√≠a)</label>
                    </div>
                </div>

                <!-- INFORMACI√ìN M√âDICA Y ESPECIAL -->
                <div class="section-title">Informaci√≥n M√©dica y Especial</div>

                <div class="form-group">
                    <label for="alergias">Alergias o Condiciones M√©dicas</label>
                    <textarea id="alergias" rows="3" placeholder="Menciona cualquier alergia, condici√≥n m√©dica o cuidado especial que requiera tu perro..."></textarea>
                </div>

                <div class="form-group">
                    <label for="medicamentos">Medicamentos (si aplica)</label>
                    <textarea id="medicamentos" rows="2" placeholder="Nombre del medicamento, dosis y horario..."></textarea>
                </div>

                <div class="form-group">
                    <label for="veterinario">Veterinario de Confianza</label>
                    <input type="text" id="veterinario" placeholder="Nombre y tel√©fono del veterinario">
                </div>

                <div class="form-group">
                    <label for="notas">Notas Especiales</label>
                    <textarea id="notas" rows="3" placeholder="Comportamiento, miedos, cosas que le gustan, etc..."></textarea>
                </div>

                <!-- RESUMEN DE PRECIO -->
                <div class="price-section">
                    <h3>üí∞ Resumen de Precio</h3>
                    <div class="price-breakdown" id="priceBreakdown">
                        <div class="price-item">
                            <span>Estancia base:</span>
                            <span id="precioBase">$0</span>
                        </div>
                    </div>
                    <div class="total-price">Total: $<span id="totalAPagar">0</span></div>
                    <div style="font-size: 0.9em; color: #666;">
                        *Precio sujeto a confirmaci√≥n
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">üè† Reservar Estancia</button>
            </form>

            <div id="successMessage" class="success-message">
                ‚úÖ ¬°Reserva registrada exitosamente! Nos pondremos en contacto contigo pronto.
            </div>
        </div>
    </div>

    <script>
        // TABLA DE PRECIOS
        const precios = {
            estancia: {
                'CH/M': 150,
                'G': 200,
                'XG': 250
            },
            alimentoSalmon: 90,
            alimentoPollo: 80,
            comidaCasera: 50,
            medicamento: 50
        };

        // Mostrar/ocultar campo de kilos seg√∫n el alimento seleccionado
        document.getElementById('tipoComida').addEventListener('change', function() {
            const tipoComida = this.value;
            const kilosGroup = document.getElementById('kilosGroup');
            
            if (tipoComida === 'salmon' || tipoComida === 'pollo') {
                kilosGroup.style.display = 'block';
                document.getElementById('kilosAlimento').required = true;
            } else {
                kilosGroup.style.display = 'none';
                document.getElementById('kilosAlimento').required = false;
                document.getElementById('kilosAlimento').value = '';
            }
            
            calcularTotal();
        });

        function toggleHorario(horarioId) {
            const checkbox = document.getElementById(horarioId.replace('hora', 'comida'));
            const horario = document.getElementById('horario' + horarioId.replace('hora', ''));
            
            if (checkbox.checked) {
                horario.style.display = 'block';
            } else {
                horario.style.display = 'none';
            }
        }

        function calcularDias() {
            const fechaEntrada = new Date(document.getElementById('fechaEntrada').value);
            const fechaSalida = new Date(document.getElementById('fechaSalida').value);
            
            if (fechaEntrada && fechaSalida && fechaSalida > fechaEntrada) {
                const diffTime = Math.abs(fechaSalida - fechaEntrada);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                document.getElementById('totalDias').textContent = diffDays;
                document.getElementById('diasEstancia').style.display = 'block';
                
                calcularTotal();
            } else {
                document.getElementById('diasEstancia').style.display = 'none';
            }
        }

        function calcularTotal() {
            const tamano = document.getElementById('tamano').value;
            const fechaEntrada = document.getElementById('fechaEntrada').value;
            const fechaSalida = document.getElementById('fechaSalida').value;
            
            if (!tamano || !fechaEntrada || !fechaSalida) {
                return;
            }

            const dias = parseInt(document.getElementById('totalDias').textContent) || 0;
            if (dias === 0) return;

            let total = 0;
            let breakdown = '';

            // Estancia base
            const precioEstancia = precios.estancia[tamano] * dias;
            total += precioEstancia;
            breakdown += `<div class="price-item"><span>Estancia (${dias} d√≠as):</span><span>$${precioEstancia}</span></div>`;

            // Alimento
            const tipoComida = document.getElementById('tipoComida').value;
            const kilos = parseFloat(document.getElementById('kilosAlimento').value) || 0;
            
            if (tipoComida === 'salmon' && kilos > 0) {
                const precioAlimento = precios.alimentoSalmon * kilos;
                total += precioAlimento;
                breakdown += `<div class="price-item"><span>Alimento de Salm√≥n (${kilos} kg):</span><span>$${precioAlimento}</span></div>`;
            } else if (tipoComida === 'pollo' && kilos > 0) {
                const precioAlimento = precios.alimentoPollo * kilos;
                total += precioAlimento;
                breakdown += `<div class="price-item"><span>Alimento de Pollo (${kilos} kg):</span><span>$${precioAlimento}</span></div>`;
            } else if (tipoComida === 'casera') {
                const precioComida = precios.comidaCasera * dias;
                total += precioComida;
                breakdown += `<div class="price-item"><span>Comida casera (${dias} d√≠as):</span><span>$${precioComida}</span></div>`;
            }

            // Medicamento
            if (document.getElementById('medicamento').checked) {
                const precioMedicamento = precios.medicamento * dias;
                total += precioMedicamento;
                breakdown += `<div class="price-item"><span>Administraci√≥n de medicamento (${dias} d√≠as):</span><span>$${precioMedicamento}</span></div>`;
            }

            document.getElementById('priceBreakdown').innerHTML = breakdown;
            document.getElementById('precioBase').textContent = `$${precioEstancia}`;
            document.getElementById('totalAPagar').textContent = total;
        }

        // CHIWAWA: SALUDA CON EL CURSOR
        const chihuahua = document.getElementById('chihuahua');
        const leftPaw = document.getElementById('leftPaw');
        const tongue = document.getElementById('tongue');
        const tail = document.getElementById('tail');
        let isNear = false;

        document.addEventListener('mousemove', (e) => {
            const rect = chihuahua.getBoundingClientRect();
            const dist = Math.hypot(e.clientX - (rect.left + 55), e.clientY - (rect.top + 55));

            if (dist < 160) {
                if (!isNear) {
                    isNear = true;
                    leftPaw.classList.add('wave-paw');
                    tongue.style.d = 'M82 70 Q85 75 88 70';
                    tail.classList.add('happy-tail');
                    setTimeout(() => { 
                        leftPaw.classList.remove('wave-paw'); 
                        tongue.style.d = 'M82 70 Q85 73 88 70'; 
                    }, 1200);
                }
            } else if (dist > 200 && isNear) {
                isNear = false;
                tail.classList.remove('happy-tail');
            }
        });

        // Establecer fecha m√≠nima como hoy
        const hoy = new Date().toISOString().split('T')[0];
        document.getElementById('fechaEntrada').min = hoy;
        document.getElementById('fechaSalida').min = hoy;

        // Manejo del formulario
        document.getElementById('estanciaForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Recopilar horarios de comida
            const horariosComida = [];
            if (document.getElementById('comida1').checked) {
                horariosComida.push({
                    momento: 'Desayuno',
                    hora: document.getElementById('hora1').value
                });
            }
            if (document.getElementById('comida2').checked) {
                horariosComida.push({
                    momento: 'Comida',
                    hora: document.getElementById('hora2').value
                });
            }
            if (document.getElementById('comida3').checked) {
                horariosComida.push({
                    momento: 'Cena',
                    hora: document.getElementById('hora3').value
                });
            }

            // Servicios adicionales
            const servicios = [];
            if (document.getElementById('medicamento').checked) servicios.push('Administraci√≥n de medicamento ($50/d√≠a)');

            const totalCalculado = parseInt(document.getElementById('totalAPagar').textContent) || 0;
            const dias = parseInt(document.getElementById('totalDias').textContent) || 0;
            const tipoComida = document.getElementById('tipoComida').value;
            const kilos = document.getElementById('kilosAlimento').value;

            // Descripci√≥n del tipo de comida para el mensaje
            let descripcionComida = '';
            if (tipoComida === 'salmon') {
                descripcionComida = `Alimento de Salm√≥n (${kilos} kg)`;
            } else if (tipoComida === 'pollo') {
                descripcionComida = `Alimento de Pollo (${kilos} kg)`;
            } else if (tipoComida === 'casera') {
                descripcionComida = 'Comida casera';
            } else if (tipoComida === 'propias') {
                descripcionComida = 'Alimento propio (traen su comida)';
            } else if (tipoComida === 'dieta-especial') {
                descripcionComida = 'Dieta especial veterinaria';
            }

            const formData = {
                timestamp: new Date().toISOString(),
                fechaRegistro: new Date().toLocaleDateString('es-MX'),
                tipo: 'estancia',
                dueno: {
                    nombre: document.getElementById('nombreDueno').value,
                    telefono: document.getElementById('telefono').value
                },
                mascota: {
                    nombre: document.getElementById('nombrePerro').value,
                    raza: document.getElementById('raza').value,
                    tamano: document.getElementById('tamano').value,
                    edad: document.getElementById('edad').value,
                    sexo: document.getElementById('sexo').value
                },
                estancia: {
                    fechaEntrada: document.getElementById('fechaEntrada').value,
                    fechaSalida: document.getElementById('fechaSalida').value,
                    horaEntrada: document.getElementById('horaEntrada').value,
                    horaSalida: document.getElementById('horaSalida').value,
                    totalDias: dias
                },
                alimentacion: {
                    tipo: tipoComida,
                    descripcion: descripcionComida,
                    kilos: kilos,
                    cantidad: document.getElementById('cantidadComida').value,
                    horarios: horariosComida
                },
                serviciosAdicionales: servicios,
                informacionMedica: {
                    alergias: document.getElementById('alergias').value,
                    medicamentos: document.getElementById('medicamentos').value,
                    veterinario: document.getElementById('veterinario').value,
                    notas: document.getElementById('notas').value
                },
                totalEstimado: totalCalculado
            };

            // Guardar en localStorage
            let estancias = JSON.parse(localStorage.getItem('cooperwash_estancias') || '[]');
            estancias.push(formData);
            localStorage.setItem('cooperwash_estancias', JSON.stringify(estancias));
            
            // Guardar en Firebase
            db.collection('estancias').add(formData)
                .then(function(docRef) {
                    console.log('‚úÖ Estancia guardada en Firebase con ID:', docRef.id);
                })
                .catch(function(error) {
                    console.error('‚ö†Ô∏è Error Firebase:', error);
                });

            // Crear mensaje para WhatsApp
            const horariosTexto = horariosComida.map(h => `${h.momento}: ${h.hora}`).join(', ');
            const serviciosTexto = servicios.length > 0 ? servicios.join(', ') : 'Ninguno (Paseos y juegos ya incluidos)';

            const mensajeWhatsApp = `üè† *NUEVA RESERVA - ESTANCIA CANINA* üêï

üë§ *DUE√ëO:*
Nombre: ${formData.dueno.nombre}
Tel√©fono: ${formData.dueno.telefono}

üê∂ *MASCOTA:*
Nombre: ${formData.mascota.nombre}
Raza: ${formData.mascota.raza}
Tama√±o: ${formData.mascota.tamano}
Edad: ${formData.mascota.edad || 'No especificada'}
Sexo: ${formData.mascota.sexo}

üìÖ *ESTANCIA:*
Entrada: ${formData.estancia.fechaEntrada} a las ${formData.estancia.horaEntrada}
Salida: ${formData.estancia.fechaSalida} a las ${formData.estancia.horaSalida}
Total de d√≠as: ${dias}

üçñ *ALIMENTACI√ìN:*
Tipo: ${descripcionComida}
Cantidad por porci√≥n: ${formData.alimentacion.cantidad || 'Por definir'}
Horarios: ${horariosTexto || 'Por definir'}

‚ú® *SERVICIOS ADICIONALES:*
${serviciosTexto}

üè• *INFORMACI√ìN M√âDICA:*
${formData.informacionMedica.alergias ? 'Alergias/Condiciones: ' + formData.informacionMedica.alergias : 'Sin alergias reportadas'}
${formData.informacionMedica.medicamentos ? '\nMedicamentos: ' + formData.informacionMedica.medicamentos : ''}
${formData.informacionMedica.veterinario ? '\nVeterinario: ' + formData.informacionMedica.veterinario : ''}
${formData.informacionMedica.notas ? '\nNotas: ' + formData.informacionMedica.notas : ''}

üí∞ *TOTAL ESTIMADO: $${totalCalculado}*

üìÖ Registrado: ${formData.fechaRegistro}`;

            const tuWhatsApp = '5219993641079';
            const urlWhatsApp = `https://wa.me/${tuWhatsApp}?text=${encodeURIComponent(mensajeWhatsApp)}`;

            document.getElementById('successMessage').innerHTML = `
                ‚úÖ ¬°Reserva registrada exitosamente!<br>
                <strong style="font-size: 1.3em; color: #fff;">Total estimado: $${totalCalculado}</strong><br>
                <strong style="font-size: 1.1em; color: #fff;">${dias} d√≠as de estancia</strong><br><br>
                <button onclick="window.open('${urlWhatsApp}', '_blank')" style="
                    background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 8px;
                    font-size: 1em;
                    font-weight: 600;
                    cursor: pointer;
                    margin-top: 10px;
                    box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
                ">
                    üì± Confirmar por WhatsApp
                </button>
                <br>
                <button onclick="location.reload()" style="
                    background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 8px;
                    font-size: 1em;
                    font-weight: 600;
                    cursor: pointer;
                    margin-top: 10px;
                    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
                ">
                    üêæ Nueva Reserva
                </button>
            `;
            document.getElementById('successMessage').classList.add('show');
            document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>